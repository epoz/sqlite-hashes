#!/bin/sh
#
# See https://github.com/rhysd/cargo-husky#readme
#

echo "-------------------------------------------------------------------------------"
echo "Run CI steps"
echo "The following steps are also ran during   git push   command."
echo "If you want to push your changes without running CI, use   git push --no-verify"
echo "-------------------------------------------------------------------------------"

set -ex

rustc --version
cargo --version
cargo fmt --all -- --check
cargo clippy -- -D warnings
cargo build
cargo test --workspace --all-targets --all-features --bins --tests --lib --benches
cargo test --no-default-features --features md5
cargo test --no-default-features --features sha1
cargo test --no-default-features --features sha256
cargo test --no-default-features --features sha512
cargo test --doc
RUSTDOCFLAGS="-D warnings" cargo doc --no-deps
